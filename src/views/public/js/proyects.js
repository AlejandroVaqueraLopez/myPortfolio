import {proyectsListData} from "./data.js";

const proyectsList = document.querySelector("#proyectsList");

//render all the items iterating data objects 
const render = (proyectsListData) => {
	proyectsListData.forEach((obj) => {
		itemTemplate(obj);
	});
}

//template techsItem generator
const techsItemTemplate = (techList) => {
	const proyectTechs = document.createElement("div");
	proyectTechs.classList.add("proyectTechs");

	techList.forEach((item) => {
		const proyectTechsItem = document.createElement("div");
		proyectTechsItem.classList.add("proyectTechsItem");

		const div = document.createElement("div");

		const techImage = document.createElement("div");
		techImage.classList.add("techImage");
		techImage.style.backgroundImage = `url(${item.icon})`;

		const h4 = document.createElement("h4");
		h4.textContent = `${item.name}`;

		div.appendChild(techImage);
		div.appendChild(h4);

		proyectTechsItem.appendChild(div);

		proyectTechs.appendChild(proyectTechsItem);
	})
	return proyectTechs;
}

//this generates every list item template and fill it with data
const itemTemplate = (obj) => {
	const {image,imageMobile,name,info,techList,release,link,repository} = obj;

	const li = document.createElement("li");
	li.id = `${name}`;

	const itemContent = document.createElement("div");
	itemContent.classList.add("itemContent");

	const proyectImage = document.createElement("div");
	proyectImage.style.backgroundImage = `url(${image})`;
	proyectImage.classList.add("proyectImage");//we want to add a 3d animation also!

	const proyectImageMobile = document.createElement("div");
	proyectImageMobile.style.backgroundImage = `url(${imageMobile})`;
	proyectImageMobile.classList.add("proyectImageMobile");//we want to add a 3d animation also!

	const proyectInfo = document.createElement("div");
	proyectInfo.classList.add("proyectInfo");

	const stProyectInfoSection = document.createElement("div");
	stProyectInfoSection.classList.add("proyectInfoSection");

	const h2 = document.createElement("h2");
	h2.textContent = `${name}`;

	const itemContentContainer = document.createElement("div");
	itemContentContainer.classList.add("itemContentContainer");

	const proyectImageContainer = document.createElement("div");
	proyectImageContainer.classList.add("proyectImageContainer");


	/*const p = document.createElement("p");
	p.textContent = `${info}`;*/

	const proyectTechs = techsItemTemplate(techList);

	const ndProyectInfoSection = document.createElement("div");
	ndProyectInfoSection.classList.add("proyectInfoSection");

	const releaseDate = document.createElement("label");
	releaseDate.classList.add("releaseDate");
	releaseDate.textContent = `Release date: ${release}`;

	const btnVisitContainer = document.createElement("div");
	btnVisitContainer.classList.add("btnVisitContainer");

	const btnVisit = document.createElement("a");
	btnVisit.classList.add("btnVisit","btnMain");
	btnVisit.textContent = "Visit";
	btnVisit.target = "_blank";
	btnVisit.href = `${link}`;
	if(link != ""){
		btnVisit.textContent = "Visit";
		btnVisit.href = `${link}`;
	}else{
		btnVisit.textContent = "Unavailable";
		btnVisit.style.opacity = "0.5";
		btnVisit.style.userSelect = "none";
	}

	const proyectsGithubLink = document.createElement("a");
	proyectsGithubLink.classList.add("proyectsGithubLink");
	proyectsGithubLink.target = "_blank";
	proyectsGithubLink.href = `${repository}`;

	//apending (inside)
	//stProyectInfoSection.appendChild(p);
	stProyectInfoSection.appendChild(proyectTechs);

	ndProyectInfoSection.appendChild(releaseDate);
	
	btnVisitContainer.appendChild(btnVisit);
	btnVisitContainer.appendChild(proyectsGithubLink);
	ndProyectInfoSection.appendChild(btnVisitContainer);

	proyectInfo.appendChild(stProyectInfoSection);
	proyectInfo.appendChild(ndProyectInfoSection);

	proyectImageContainer.appendChild(proyectImageMobile);
	proyectImageContainer.appendChild(proyectImage);

	itemContent.appendChild(proyectInfo);
	itemContent.appendChild(proyectImageContainer);

	itemContentContainer.appendChild(h2);
	itemContentContainer.appendChild(itemContent);

	li.appendChild(itemContentContainer);

		/*
				<!--all items are generated by templates (proyects.js)-->
					<li id="${name}">

						<div class="itemContent">

							<div class="itemContentContainer">

								<div class="proyectInfo">

									<div class="proyectInfoSection">
										<h2>FitnessGym landing page</h2>
										<p>Landing page of a gym brand, made with special gray-scale colors combined with Cyan, responsive design and user dynamism.</p>
										<div class="proyectTechs">

											<div class="proyectTechsItem">
												<div>
													<div class="techImage"></div>
													<h4>Javascript</h4>
												</div>
											</div>

										</div>
									</div>

									<div class="proyectInfoSection">
										<label class="releaseDate">Released in 2021</label>
										<div class="btnVisitContainer">
											<a class="btnVisit" target="_blank" href="https://fitnessgym.unexlink.co">Visit</a> <!--acts like a button-->
											<a href="gihub....." class="proyectGithubLink"></a>
										</div>
									</div>
								</div>

								<div class="proyectImage"></div><!--image is setted as background-->

							</div>

						</div>

					</li>
	;*/
	proyectsList.appendChild(li);
}
render(proyectsListData);

